{
  "G1": {
    "saving_dir": "save_models/G1",
    "num_lm_train_epochs": 0,
    "num_train_epochs": 16,
    "saving_stop_steps": 341
  },
  "following": {
    "train_lm_on_pseudo_true": true,
    "train_lm_on_pseudo": false,
    "num_lm_train_epochs": 0,
    "max_generation": 1,
    "alpha": 0.0,
    "beta": 0.0,
    "optimizer": "adam",
    "learning_rate": 5e-5,
    "adam_epsilon": 1e-8,
    "warmup_steps": 0,
    "max_norm": 3.0,
    "weight_decay": 0.0,
    "max_grad_norm": 1.0,
    "epochs": 70,
    "batches_per_report": 200,
    "batches_per_sampling": 500,
    "evaluate_during_training": false,
    "restart_from_latest_checkpoint": true,
    "saving_dir": "save_models/following_generations",
    "joint_prefix": "joint_train_checkpoint",
    "checkpoint_prefix": "following_checkpoint",
    "sentricon_saving_fn": "sentricon_checkpoint.pt",
    "gpt_saving_format": "gpt2_{}.pt",
    "save_steps": 36000,
    "save_steps500000000000000000000000": 5000,
    "lm_max_steps": -1,
    "epoch_max_steps": -1,
    "max_steps":-1,
    "random_seed": 15321,
    "num_train_epochs": 3,
    "num_joint_train_epochs": 0,
    "per_gpu_train_alsecond_recon_batch_size": 2,
    "lambda_alsecond_lm_loss": 1.0,
    "lambda_hist_cocon_lm_loss": 0,
    "lambda_aspects_control_loss": 0,
    "lambda_opinions_control_loss": 0,
    "lambda_positional_sentiment_control_loss": 0,
    "epoch_ind_to_start_hist_cocon_lm": 0,
    "step_ind_to_start_hist_cocon_lm": 0,
    "transform_h_after_layernorm": false,
    "epoch_ind_to_start_alsecond_recon": 0,
    "lambda_alsecond_recon_lm_loss": 0.0
  },
  "training": {
    "do_train": true,
    "num_lm_train_epochs": 0,
    "gradient_accumulation_steps": 1,
    "per_gpu_train_lm_batch_size": 0,
    "per_gpu_train_batch_size": 8,
    "restart_from_latest_checkpoint": true,
    "only_lm": false,
    "optimizer": "adam",
    "learning_rate": 5e-5,
    "adam_epsilon": 1e-8,
    "warmup_steps": 0,
    "max_norm": 3.0,
    "weight_decay": 0.0,
    "max_grad_norm": 1.0,
    "epochs": 70,
    "batches_per_report": 200,
    "batches_per_sampling": 500,
    "evaluate_during_training": false,
    "save_steps": 682,
    "save_steps999999999999999999999999999": 999999999,
    "lm_max_steps": -1,
    "epoch_max_steps": -1,
    "max_steps":-1,
    "random_seed": 15321,
    "num_train_epochs": 0,
    "per_gpu_train_alsecond_recon_batch_size": 2,
    "lambda_alsecond_lm_loss": 1.0,
    "lambda_hist_cocon_lm_loss": 0,
    "lambda_aspects_control_loss": 0,
    "lambda_opinions_control_loss": 0,
    "lambda_positional_sentiment_control_loss": 10.0,
    "epoch_ind_to_start_hist_cocon_lm": 0,
    "step_ind_to_start_hist_cocon_lm": 0,
    "transform_h_after_layernorm": false,
    "epoch_ind_to_start_alsecond_recon": 0,
    "lambda_alsecond_recon_lm_loss": 0.0
  },
  "data": {
    "labeled": "data/crop/SemEval/train.json",
    "labeled_mams": "data/crop/MAMS/train.json",
    "unlabeled": "data/crop/yelp/sentiment.train.0",
    "labeled_test": "data/crop/SemEval/test.json",
    "labeled_test_mams": "data/crop/MAMS/test.json",
    "unlabeled_test": "data/crop/yelp/sentiment.test.0",
    "retrieve_opn_sem_fn": "data/crop/SemEval/train.json",
    "retrieve_opn_mams_fn": "data/pseudo_opinion_data/pseudo_opinion_MAMS_train.json",
    "overwrite_cache": false,
    "src_vocab": "data/vocab/vocab",
    "tgt_vocab": "data/vocab/vocab",
    "eval_output_filename": "eval_results.txt",
    "prepended_text_to_remove": null,
    "polarity_vocab": {"NEG": 1, "NEU": 2,"POS": 3},
    "polarity_placer": {"NEG": "terrible", "NEU": "ok","POS": "perfect"},
    "share_vocab": true,
    "attribute_vocab": "data/yelp/ngram.15.attribute",
    "ngram_attributes": true,
    "cs_len": 32,
    "hs_len": 2,
    "tis_len": 32,
    "gen_cs_len": null,
    "gen_hs_len": null,
    "gen_tis_len": null,
    "generate_length": 32,
    "temperature": 1.0,
    "ctrl_mask_mean": 164.0,
    "use_hint_matrix": true,
    "k": 0,
    "p": 0.9,
    "do_sample": false,
    "num_beams": 5,
    "repetition_penalty": 1.0,
    "context_attn_bias": 0.0,
    "num_return_sequences": 1,
    "min_hs_tis_split_offset": -1,
    "max_hs_tis_split_offset": 2,
    "per_gpu_eval_batch_size": 8,
    "eval_ppl_save_per_n_epoch": 2,
    "self_cocon_lm_cs_mask_prob": 0.0,
    "self_token_mask_prob": 1.0,
    "self_cocon_lm_mutual_exc_mask": false,
    "track_loss_gradnorms": false,
    "track_hist_cocon_lm_loss": false,
    "batch_size": 8,
    "save_total_limit": 1,
    "logging_steps": 300,
    "hint_complete_threshold": 0.90,
    "hint_lambda": 0.6,
    "max_len": 50,
    "working_dir": "working_dir",
    "joint_of_aspect_opinion": 982,
    "POS_JOINTER": " is ",
    "NEU_JOINTER": " is ",
    "NEG_JOINTER": " is ",
    "POS_JOINTER_idx": 318,
    "NEU_JOINTER_idx": 318,
    "NEG_JOINTER_idx": 318,
    "ORI_JOINTER": " -------- ",
    "INNER_JOINTER": " AND ",
    "SUB_TEXT_SEG": "</",
    "SUB_TEXT_SEG_ID": 7359,
    "START_END_PAD": "<|endoftext|>",
    "INPUT_SENTI_TUPLE": "triples",
    "HINT_OPINIONS": true,
    "START_END_IDX": 50256,
    "senti_type_id": 4843,
    "random_seed": 15321,
    "local_rank": -1,
    "no_cuda": false,
    "do_cocon_compute": true,
    "line_by_line_hs": false,
    "line_by_line_cs": false,
    "use_attn_mask": true,
    "compose_triples": true,
    "tuple_confidence_computation": "mean"
  },
    "model": {
        "model_type": "gpt2",
        "model_name_or_path": "gpt2-medium",
        "output_dir": "save_models/generation_0",
        "best_save_dir": "save_models/bests",
        "result_path": "save_models",
        "checkpoint_prefix": "hinted_lm_checkpoint",
        "lm_checkpoint_prefix": "lm_checkpoint",
        "cocon_saving_fn": "cocon_checkpoint.pt",
        "cache_dir": null,
        "block_size": -1,
        "output_meanvars": true,
        "compute_meanvars_before_layernorm": false,
        "output_hidden_for_cocon_after_block_ind": 6,
        "use_only_last_cocon_output_for_ar": false,
        "emb_dim": 128,
        "attention": false,
        "encoder": "lstm",
        "src_hidden_dim": 512,
        "src_layers": 1,
        "bidirectional": true,
        "tgt_hidden_dim": 512,
        "tgt_layers": 1,
        "decode": "greedy",
        "dropout": 0.2,
        "split_key_and_value_hidden": true,
        "senti_hidden_use_only_key": true,
        "train_joint_lm_and_senticon": false
    },
    "evaluate": {
      "eval_compute_without_checkpoint": false,
      "eval_all_checkpoints": false,
      "sentricon_output_filename": "sentricon_output.txt",
      "append_sentricon_output_files": false,
      "sentricon_output_jsonl_filename": "sentricon_output.jsonl",
      "cocon_compute_history_source_data_file": "data/gpt2output/webtext.valid.jsonl",
      "bleu_output_file": "bleu_result.jsonl",
      "nist_output_file": "nist_result.jsonl",
      "meteor_output_file": "meteor_result.jsonl",
      "rouge_output_file": "rouge_result.jsonl",
      "ppl_output_file": "PPL_result.jsonl",
      "prepend_bos_token_to_line": false,
      "regenerate": true,
      "num_alsecond_generate": 600,
      "strategy_generation": false
    },
  "end_segment": [",", "......",".....","....","...","..",".",";","!","?","/"],
  "end_segment_id": [11,13,492,11485,986,1106,12359,16317,25780,2109,23513,14,26,0,3228,10185,13896,
                     50184,30,3548,28358,9805,19622,1003,20379,9705,837,764,11485,2644,19424,47082,
                     20004,2162,5145,37867,5633,19153,34913,1220,3373,34013]
}
